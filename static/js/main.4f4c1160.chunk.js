(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={main:"styles_main__3vzHO"}},101:function(e,t,n){e.exports={container:"styles_container__3x-Gi"}},102:function(e,t,n){e.exports={modal_overlay:"styles_modal_overlay__32vYS"}},104:function(e,t,n){e.exports={ingredient:"styles_ingredient__1rsNY"}},105:function(e,t,n){e.exports={not_found:"styles_not_found__2zR6n"}},106:function(e,t,n){e.exports={orders:"styles_orders__c_RL0"}},107:function(e,t,n){e.exports={history:"styles_history__6Bbcr"}},108:function(e,t,n){e.exports={order:"styles_order__1yS-L"}},117:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(35),i=n.n(s),o=(n(117),n(2)),l=n(11),u=n(23),d=n(6),j=n(9),m=n(4),b=n(5),p=n.n(b),x=n(12),f=n(8),O=n(96),h=n(97),_=function(){function e(t){var n=this,r=t.baseUrl;Object(O.a)(this,e),this._baseUrl=void 0,this._headers=void 0,this._makeRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2?arguments[2]:void 0,a=r.token,c=r.body;return a&&(n._headers=Object(d.a)(Object(d.a)({},n._headers),{},{Authorization:"Bearer ".concat(a)})),fetch(n._baseUrl+e,{method:t,headers:n._headers,body:JSON.stringify(c)}).then((function(e){return n.checkReponse(e)})).catch(function(){var r=Object(x.a)(p.a.mark((function r(a){var s,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("jwt expired"!==a.message){r.next=14;break}return r.next=3,n.refreshToken();case 3:return s=r.sent,localStorage.setItem("accessToken",s.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",s.refreshToken),r.next=8,n._makeRequest(e,t,{token:s.accessToken.split("Bearer ")[1],body:c});case 8:return i=r.sent,r.next=11,n.checkReponse(i);case 11:return r.abrupt("return",r.sent);case 14:return r.abrupt("return",Promise.reject("error"));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},this._baseUrl=r,this._headers={"Content-Type":"application/json"}}return Object(h.a)(e,[{key:"checkReponse",value:function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}},{key:"refreshToken",value:function(){return this._makeRequest("/auth/token","POST",{body:{token:localStorage.getItem("refreshToken")||""}})}},{key:"forgotPassword",value:function(e){return this._makeRequest("/password-reset","POST",{body:e})}},{key:"resetPassword",value:function(e){return this._makeRequest("/password-reset/reset","POST",{body:e})}},{key:"login",value:function(e){return this._makeRequest("/auth/login","POST",{body:e})}},{key:"register",value:function(e){return this._makeRequest("/auth/register","POST",{body:e})}},{key:"getProfile",value:function(e){return this._makeRequest("/auth/user","GET",{token:e})}},{key:"updateProfile",value:function(e){var t=e.token,n=e.body;return this._makeRequest("/auth/user","PATCH",{token:t,body:n})}},{key:"logout",value:function(){return this._makeRequest("/auth/logout","POST",{body:{token:localStorage.getItem("refreshToken")}})}}]),e}(),y=new _({baseUrl:"https://norma.nomoreparties.space/api"}),g=Object(f.c)("auth/loginRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.login(t);case 2:if("error"!==(n=e.sent)){e.next=5;break}throw new Error;case 5:return localStorage.setItem("accessToken",n.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",n.refreshToken),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(f.c)("auth/registerRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.register(t);case 2:if("error"!==(n=e.sent)){e.next=5;break}throw new Error;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(f.c)("auth/userRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getProfile(t);case 2:if((n=e.sent).success){e.next=5;break}throw new Error;case 5:return e.abrupt("return",n.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(f.c)("auth/updateProfileRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,r=t.body,e.next=3,y.updateProfile({token:n,body:r});case 3:if((a=e.sent).success){e.next=6;break}throw new Error;case 6:return e.abrupt("return",a.user);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(f.c)("auth/logoutRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.logout();case 2:if((n=e.sent).success){e.next=5;break}throw new Error;case 5:return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e.abrupt("return",n.user);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C={loginRequestStart:!1,loginRequestFailed:!1,registerRequestStart:!1,registerRequestFailed:!1,userRequestStart:!1,userRequestFailed:!1,updateProfileRequestStart:!1,updateProfileRequestFailed:!1,logoutRequestStart:!1,logoutRequestFailed:!1,accessToken:"",refreshToken:"",user:null},S=Object(f.e)({name:"auth",initialState:C,reducers:{setTokenAction:function(e,t){e.accessToken=t.payload}},extraReducers:function(e){e.addCase(g.pending,(function(e){e.loginRequestStart=!0})).addCase(g.fulfilled,(function(e,t){e.loginRequestStart=!1,e.user=t.payload.user,e.accessToken=t.payload.accessToken.split("Bearer ")[1],e.refreshToken=t.payload.refreshToken})).addCase(g.rejected,(function(e){e.loginRequestStart=!1,e.loginRequestFailed=!0})).addCase(v.pending,(function(e){e.registerRequestStart=!0})).addCase(v.fulfilled,(function(e,t){e.registerRequestStart=!1,e.user=t.payload.user,e.accessToken=t.payload.accessToken.split("Bearer ")[1],e.refreshToken=t.payload.refreshToken})).addCase(v.rejected,(function(e){e.registerRequestStart=!1,e.registerRequestFailed=!0})).addCase(N.pending,(function(e){e.userRequestStart=!0})).addCase(N.fulfilled,(function(e,t){e.userRequestStart=!1,e.user=t.payload})).addCase(N.rejected,(function(e){e.userRequestStart=!1,e.userRequestFailed=!0})).addCase(k.pending,(function(e){e.updateProfileRequestStart=!0})).addCase(k.fulfilled,(function(e,t){e.updateProfileRequestStart=!1,e.user=t.payload})).addCase(k.rejected,(function(e){e.updateProfileRequestStart=!1,e.updateProfileRequestFailed=!0})).addCase(w.pending,(function(e){e.logoutRequestStart=!0})).addCase(w.fulfilled,(function(e){return C})).addCase(w.rejected,(function(e){e.logoutRequestStart=!1,e.logoutRequestFailed=!0}))}}),R=S.actions.setTokenAction,T=S.reducer,I=n(21),E=n.n(I),q=n(24),P=Object(f.c)("order/createOrderRequest",function(){var e=Object(x.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ingredients,r=t.token,e.next=3,fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(r)},body:JSON.stringify({ingredients:n})});case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:throw new Error(a.status+": "+a.statusText);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(f.e)({name:"order",initialState:{orderRequestStart:!1,orderRequestFailed:!1,orderDetails:null},reducers:{},extraReducers:function(e){e.addCase(P.pending,(function(e){e.orderRequestStart=!0})).addCase(P.fulfilled,(function(e,t){e.orderRequestStart=!1,e.orderDetails=t.payload})).addCase(P.rejected,(function(e){e.orderRequestStart=!1,e.orderRequestFailed=!0}))}}).reducer,B=Object(f.e)({name:"builder",initialState:{main:[],bun:null,counts:{}},reducers:{addIngredient:function(e,t){if("bun"!==t.payload.type){if(e.bun){var n=t.payload;e.counts[n._id]=e.counts[n._id]?e.counts[n._id]+1:1,e.main.push(n)}}else e.bun&&(e.counts[e.bun._id]=0),e.bun=t.payload,e.counts[t.payload._id]=2},removeIngredient:function(e,t){e.counts[e.main[t.payload]._id]=e.counts[e.main[t.payload]._id]>1?e.counts[e.main[t.payload]._id]-1:0,e.main=e.main.filter((function(e,n){return n!==t.payload}))},removeBun:function(e){e.bun&&delete e.counts[e.bun._id],e.bun=null},moveIngredient:function(e,t){var n=Object(j.a)(t.payload,2),r=n[0],a=n[1];e.main.splice(a,0,e.main.splice(r,1)[0])}}}),L=B.actions,M=L.addIngredient,D=L.removeIngredient,A=L.moveIngredient,G=L.removeBun,z=B.reducer,U=Object(f.c)("ingredients/fetchIngredients",Object(x.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients");case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:return n=e.sent,r=n.data,e.abrupt("return",r);case 11:throw new Error(t.status+": "+t.statusText);case 12:case"end":return e.stop()}}),e)})))),W=Object(f.e)({name:"ingredients",initialState:{request:!1,failed:!1,ingredients:[]},reducers:{},extraReducers:function(e){e.addCase(U.pending,(function(e){e.request=!0})).addCase(U.fulfilled,(function(e,t){e.request=!1,e.ingredients=t.payload})).addCase(U.rejected,(function(e){e.request=!1,e.failed=!0}))}}).reducer;!function(e){e.CONNECTING="CONNECTING...",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(r||(r={}));var H=Object(f.b)("WS_CONNECT"),J=Object(f.b)("WS_DISCONNECT"),X=Object(f.b)("WS_CONNECTING"),Y=Object(f.b)("WS_OPEN"),K=Object(f.b)("WS_CLOSE"),Z=Object(f.b)("WS_MESSAGE"),Q=Object(f.b)("WS_ERROR"),V={status:r.OFFLINE,connectionError:"",orders:[],total:0,totalToday:0},$=Object(f.d)(V,(function(e){e.addCase(X,(function(e){e.status=r.CONNECTING})).addCase(Y,(function(e){e.status=r.ONLINE,e.connectionError=""})).addCase(K,(function(e){e.status=r.OFFLINE,e.orders=[],e.total=0,e.totalToday=0})).addCase(Q,(function(e,t){e.connectionError=t.payload})).addCase(Z,(function(e,t){e.orders=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday}))})),ee=n(14),te=Object(ee.b)({ingredients:W,builder:z,order:F,auth:T,orders:$}),ne=function(e){return function(t){var n=null,r=!1,a=0,c="";return function(s){return function(i){var o=t.dispatch,l=e.wsConnect,u=e.wsDisconnect,d=e.wsSendMessage,j=e.onOpen,m=e.onClose,b=e.onError,p=e.onMessage,x=e.wsConnecting;l.match(i)&&(console.log("connect"),c=i.payload,n=new WebSocket(c),r=!0,o(x())),n&&(n.onopen=function(){o(j()),console.log("open")},n.onerror=function(e){console.log("error")},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);o(p(n))},n.onclose=function(e){1e3!==e.code&&(console.log("error"),o(b(e.code.toString()))),console.log("close"),o(m()),r&&(o(x()),a=window.setTimeout((function(){o(l(c))}),3e3))},d&&d.match(i)&&(console.log("send"),n.send(JSON.stringify(i.payload))),u.match(i)&&(console.log("disconnect"),clearTimeout(a),r=!1,a=0,n.close(),o(m()))),s(i)}}}}({wsConnect:H,wsDisconnect:J,wsConnecting:X,onOpen:Y,onClose:K,onError:Q,onMessage:Z}),re=Object(f.a)({reducer:te,middleware:function(e){return e().concat(ne)},devTools:!1}),ae=function(){return Object(q.b)()},ce=q.c,se=n(0);var ie=function(){var e,t=ae(),n=ce((function(e){return e.auth})),r=n.accessToken,c=Object(o.g)(),s=Object(a.useState)({email:"",password:""}),i=Object(j.a)(s,2),b=i[0],p=i[1],x=function(e){p(Object(d.a)(Object(d.a)({},b),{},Object(u.a)({},e.target.name,e.target.value)))},f=localStorage.getItem("accessToken");return r||f?Object(se.jsx)(o.a,{to:(null===(e=c.location.state)||void 0===e?void 0:e.from)||"/"}):Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:E.a.auth,children:Object(se.jsxs)("form",{className:E.a.form,onSubmit:function(e){e.preventDefault(),t(g(Object(d.a)({},b)))},children:[Object(se.jsx)("h1",{className:"text text_type_main-medium primary",children:"\u0412\u0445\u043e\u0434"}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"email",name:"email",placeholder:"Email",value:b.email,onChange:x})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:b.password,onChange:x})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(se.jsxs)("span",{className:"text text_type_main-default secondary mt-20",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(se.jsx)(l.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(se.jsxs)("span",{className:"text text_type_main-default secondary mt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(se.jsx)(l.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})})},oe=n(52),le=n.n(oe),ue=n(32),de=n.n(ue),je={profile:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","order-history":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"},me=function(e){var t=e.location,n=Object(q.b)(),r=Object(o.g)(),a=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(w());case 2:r.replace("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(se.jsxs)("div",{className:[de.a.nav,"mr-15"].join(" "),children:[Object(se.jsxs)("ul",{className:"text text_type_main-medium mb-20",children:[Object(se.jsx)("li",{className:de.a.item,children:Object(se.jsx)(l.c,{to:"/profile",className:"secondary",activeClassName:"primary",exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(se.jsx)("li",{className:de.a.item,children:Object(se.jsx)(l.c,{to:"/profile/orders",className:"secondary",activeClassName:"primary",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(se.jsx)("li",{className:de.a.item,children:Object(se.jsx)("button",{onClick:a,className:[de.a.button,"text text_type_main-medium secondary"].join(" "),children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(se.jsx)("span",{className:[de.a.tip,"text text_type_main-default secondary"].join(" "),children:je[t]})]})};var be=function(){var e=ae(),t=ce((function(e){return e.auth})),n=t.user,r=t.accessToken,c=Object(a.useState)({name:"",email:"",password:""}),s=Object(j.a)(c,2),i=s[0],o=s[1];Object(a.useEffect)((function(){n&&o((function(e){return Object(d.a)(Object(d.a)({},n),{},{password:e.password})}))}),[n]);var l=function(e){o(Object(d.a)(Object(d.a)({},i),{},Object(u.a)({},e.target.name,e.target.value)))},b=Object(a.useRef)(null),p=Object(a.useRef)(null),x=function(e){return function(){e.current&&"name"===e.current.name?y(!1):w(!1),setTimeout((function(){return e.current&&e.current.focus()}),0)}},f=Object(a.useMemo)((function(){return n&&(!function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];if(e[a]!==t[a]&&"password"!==a)return!1}return!0}(i,n)||i.password)}),[i,n]),O=Object(a.useState)(!0),h=Object(j.a)(O,2),_=h[0],y=h[1],g=Object(a.useState)(!0),v=Object(j.a)(g,2),N=v[0],w=v[1];return n?Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)("main",{className:[le.a.profile,"main mt-30"].join(" "),children:[Object(se.jsx)(me,{location:"profile"}),Object(se.jsxs)("form",{className:le.a.form,onSubmit:function(t){t.preventDefault(),e(k({token:r,body:i}))},children:[Object(se.jsx)(m.Input,{value:i.name,onChange:l,name:"name",placeholder:"\u0418\u043c\u044f",icon:"EditIcon",type:"text",ref:b,disabled:_,onIconClick:x(b),onBlur:function(){return y(!0)}}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.EmailInput,{value:i.email,onChange:l,name:"email"})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{value:i.password||"",onChange:l,name:"password",onIconClick:x(p),icon:"EditIcon",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",ref:p,disabled:N,onBlur:function(){return w(!0)}})}),f&&Object(se.jsxs)("div",{className:[le.a.buttons,"mt-6"].join(" "),children:[Object(se.jsx)(m.Button,{onClick:function(){return o(n)},type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(se.jsx)(m.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})}):null},pe=n(111),xe=["children"],fe=function(e){var t=e.children,n=Object(pe.a)(e,xe),r=Object(a.useState)(!1),c=Object(j.a)(r,2),s=c[0],i=c[1],l=ae(),u=ce((function(e){return e.auth})),m=u.user,b=Object(a.useCallback)(Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("accessToken"),m||!t){e.next=5;break}return l(R(t)),e.next=5,l(N(t));case 5:i(!0);case 6:case"end":return e.stop()}}),e)}))),[l,m]);return Object(a.useEffect)((function(){b()}),[b]),s?Object(se.jsx)(o.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){var n=e.location;return m?t:Object(se.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}})):null};var Oe=function(){var e=Object(o.g)(),t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],c=n[1];function s(){return(s=Object(x.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.preventDefault(),t.next=4,y.forgotPassword({email:r});case 4:e.replace({pathname:"/reset-password",state:{isActive:!0}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return localStorage.getItem("accessToken")?Object(se.jsx)(o.a,{to:"/"}):Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:[E.a.auth,"mt-100"].join(" "),children:Object(se.jsxs)("form",{className:E.a.form,onSubmit:function(e){return s.apply(this,arguments)},children:[Object(se.jsx)("h1",{className:"text text_type_main-medium primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"email",name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:r,onChange:function(e){c(e.target.value)}})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(se.jsxs)("span",{className:"text text_type_main-default secondary mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(se.jsx)(l.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};var he=function(){var e=Object(o.g)(),t=e.location.state&&e.location.state.isActive,n=Object(a.useState)({password:"",code:""}),r=Object(j.a)(n,2),c=r[0],s=r[1],i=function(e){s(Object(d.a)(Object(d.a)({},c),{},Object(u.a)({},e.target.name,e.target.value)))};function b(){return(b=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,y.resetPassword({password:c.password,token:c.code});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){t?e.replace("/"):e.goBack()}),[e,t]),Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:E.a.auth,children:Object(se.jsxs)("form",{className:E.a.form,onSubmit:function(e){return b.apply(this,arguments)},children:[Object(se.jsx)("h1",{className:"text text_type_main-medium primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:c.password,onChange:i})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"text",name:"code",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:c.code,onChange:i})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(se.jsxs)("span",{className:"text text_type_main-default secondary mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(se.jsx)(l.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};var _e=function(){var e=ae(),t=ce((function(e){return e.auth})),n=t.accessToken,r=Object(o.g)(),c=Object(a.useState)({name:"",email:"",password:""}),s=Object(j.a)(c,2),i=s[0],b=s[1],p=function(e){b(Object(d.a)(Object(d.a)({},i),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){n&&r.replace("/")}),[n,r]),localStorage.getItem("accessToken")?Object(se.jsx)(o.a,{to:"/"}):Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:E.a.auth,children:Object(se.jsxs)("form",{className:E.a.form,onSubmit:function(t){t.preventDefault(),e(v(Object(d.a)({},i)))},children:[Object(se.jsx)("h1",{className:"text text_type_main-medium primary",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:i.name,onChange:p})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Input,{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:p})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.PasswordInput,{name:"password",value:i.password,onChange:p})}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)(m.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(se.jsxs)("span",{className:"text text_type_main-default secondary mt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(se.jsx)(l.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})},ye=n(100),ge=n.n(ye),ve=n(110),Ne=n(208),ke=n(31),we=n.n(ke),Ce=n(101),Se=n.n(Ce),Re=function(e){var t=e.details;return Object(se.jsxs)("div",{className:"".concat(Se.a.container," pt-30 pb-30"),children:[Object(se.jsx)("h2",{className:"text text_type_digits-large ",children:t.order.number}),Object(se.jsx)("span",{className:"text text_type_main-medium mt-8 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(se.jsx)(m.CheckMarkIcon,{type:"primary"}),Object(se.jsx)("span",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(se.jsx)("span",{className:"text text_type_main-default text_color_inactive mt-2",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Te=n(53),Ie=n.n(Te),Ee=n(102),qe=n.n(Ee),Pe=function(e){var t=e.onClick;return Object(se.jsx)("div",{className:"".concat(qe.a.modal_overlay),onClick:t})},Fe=document.getElementById("root"),Be=function(e){var t=e.children,n=e.header,r=e.onClose,c=Object(a.useCallback)((function(e){"Escape"===e.key&&r()}),[r]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",c),function(){return document.removeEventListener("keydown",c)}}),[c]),i.a.createPortal(Object(se.jsxs)("div",{className:Ie.a.modal_wrapper,children:[Object(se.jsx)(Pe,{onClick:r}),Object(se.jsxs)("div",{className:"".concat(Ie.a.modal," p-10"),onClick:function(e){return e.stopPropagation()},children:[Object(se.jsx)("div",{className:"".concat(Ie.a.close_icon),children:Object(se.jsx)(m.CloseIcon,{onClick:r,type:"primary"})}),n&&Object(se.jsx)("h2",{className:"text text_type_main-large mt-3",children:n}),t]})]}),Fe)},Le=n(207),Me=n(206),De=function(e){var t=e.ingredient,n=e.index,r=Object(a.useRef)(null),c=Object(q.b)(),s=Object(Me.a)({type:"main",item:{ingredient:t,index:n}}),i=Object(j.a)(s,2)[1],o=Object(Le.a)({accept:"main",hover:function(e,t){var a;if(r.current){var s=e.index,i=n;if(s!==i){var o=null===(a=r.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset();if(u){var d=u.y-o.top;s<i&&d<l||s>i&&d>l||(c(A([s,i])),e.index=i)}}}}});return i((0,Object(j.a)(o,2)[1])(r)),Object(se.jsxs)("div",{className:"".concat(we.a.item," mb-4"),ref:r,children:[Object(se.jsx)("div",{className:"mr-2",children:Object(se.jsx)(m.DragIcon,{type:"primary"})}),Object(se.jsx)(m.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return c(D(n))}})]})},Ae=function(e,t){return e+t.price},Ge=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=ae(),s=Object(o.g)(),i=ce((function(e){return e.builder})),l=i.main,u=i.bun,b=ce((function(e){return e.auth})),f=b.user,O=b.accessToken,h=ce((function(e){return e.order})),_=h.orderDetails,y=h.orderRequestFailed,g=h.orderRequestStart,v=Object(Le.a)({accept:"ingredient",drop:function(e){c(M(Object(d.a)(Object(d.a)({},e),{},{id:Object(Ne.a)()})))}}),N=Object(j.a)(v,2)[1],k=Object(a.useMemo)((function(){return l.reduce(Ae,0)+2*(u&&u.price||0)}),[u,l]),w=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=4;break}s.replace("/login"),e.next=9;break;case 4:return t=l.map((function(e){return e._id})),u&&(t=[].concat(Object(ve.a)(t),[u._id,u._id])),e.next=8,c(P({ingredients:t,token:O}));case 8:r(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(se.jsxs)("section",{className:"constructor pt-25 pl-4",ref:N,children:[u||l.length>0?Object(se.jsxs)(se.Fragment,{children:[u&&Object(se.jsx)("div",{className:"".concat(we.a.item," ml-6 mb-4"),children:Object(se.jsx)(m.ConstructorElement,{type:"top",isLocked:l.length>0,text:u.name+" (\u0432\u0432\u0435\u0440\u0445)",price:u.price,thumbnail:u.image,handleClose:function(){return c(G())}})}),Object(se.jsx)("div",{className:we.a.list,children:null===l||void 0===l?void 0:l.map((function(e,t){return Object(se.jsx)(De,{ingredient:e,index:t},e._id)}))}),u&&Object(se.jsx)("div",{className:"".concat(we.a.item," ml-6"),children:Object(se.jsx)(m.ConstructorElement,{type:"bottom",isLocked:l.length>0,text:u.name+" (\u043d\u0438\u0437)",price:u.price,thumbnail:u.image,handleClose:function(){return c(G())}})}),Object(se.jsxs)("div",{className:"".concat(we.a.sum," mt-10"),children:[Object(se.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[k," ",Object(se.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(se.jsx)(m.Button,{onClick:w,type:"primary",size:"large",children:g?"\u0417\u0430\u0433\u0440\u0443\u043a\u0430...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]}):Object(se.jsx)("h2",{className:"text text_type_main-large",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"}),n&&_&&Object(se.jsx)(Be,Object(d.a)(Object(d.a)({onClose:function(){return r(!1)}},y&&{header:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."}),{},{children:Object(se.jsx)(Re,{isOpen:n,details:_})}))]})},ze=n(33),Ue=n.n(ze),We=n(43),He=n.n(We),Je=function(e){var t=e.ingredient,n=Object(o.h)(),r=ce((function(e){return e.builder})),a=r.counts,c=Object(Me.a)({type:"ingredient",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),s=Object(j.a)(c,2)[1];return Object(se.jsx)("div",{className:"".concat(He.a.card),id:t._id+"",ref:s,children:Object(se.jsxs)(l.b,{to:{pathname:"/ingredients/".concat(t._id),state:{ingredient:n}},children:[a[t._id]>0&&Object(se.jsx)(m.Counter,{count:a[t._id],size:"default"}),Object(se.jsx)("img",{alt:"ingredient",src:t.image,className:"".concat(He.a.image," ml-4")}),Object(se.jsxs)("span",{className:"mt-1 ".concat(He.a.info," text text_type_digits-default"),children:[t.price," ",Object(se.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(se.jsx)("span",{className:"mt-1 ".concat(He.a.info," text text_type_main-default"),children:t.name})]})})},Xe=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],c=ce((function(e){return e.ingredients})),s=c.ingredients,i=Object(a.useRef)(null),o=Object(a.useRef)(Array(3).fill(null));return Object(a.useEffect)((function(){i.current&&i.current.addEventListener("scroll",(function(e){if(i.current&&o.current[0]&&o.current[1]&&o.current[2]){var t=o.current[0].getBoundingClientRect().top-i.current.getBoundingClientRect().top,n=o.current[1].getBoundingClientRect().top-i.current.getBoundingClientRect().top,a=o.current[2].getBoundingClientRect().top-i.current.getBoundingClientRect().top,c=Math.min(Math.abs(t),Math.abs(n),Math.abs(a)),s=[t,n,a].findIndex((function(e){return Math.abs(e)===c}));r(s+"")}}))}),[]),Object(se.jsxs)("section",{className:"".concat(Ue.a.ingredients_container),children:[Object(se.jsx)("h2",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(se.jsxs)("div",{className:"".concat(Ue.a.tabs),children:[Object(se.jsx)(m.Tab,{value:"one",active:"0"===n,onClick:r,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(se.jsx)(m.Tab,{value:"two",active:"1"===n,onClick:r,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(se.jsx)(m.Tab,{value:"three",active:"2"===n,onClick:r,children:"\u041d\u0430\u0443\u0447\u0438\u043d\u043a\u0438"})]}),Object(se.jsxs)("div",{className:"".concat(Ue.a.list),ref:i,children:[Object(se.jsx)("h3",{className:"text text_type_main-medium mt-10",ref:function(e){return o.current[0]=e},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(se.jsx)("div",{className:"".concat(Ue.a.grid," mt-6 ml-4 mr-4"),children:null===s||void 0===s?void 0:s.filter((function(e){return"bun"===e.type})).map((function(e){return Object(se.jsx)(Je,{ingredient:e},e._id)}))}),Object(se.jsx)("h3",{className:"text text_type_main-medium mt-10",ref:function(e){return o.current[1]=e},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(se.jsx)("div",{className:"".concat(Ue.a.grid," mt-6 ml-4 mr-4"),children:null===s||void 0===s?void 0:s.filter((function(e){return"sauce"===e.type})).map((function(e){return Object(se.jsx)(Je,{ingredient:e},e._id)}))}),Object(se.jsx)("h3",{className:"text text_type_main-medium mt-10",ref:function(e){return o.current[2]=e},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(se.jsx)("div",{className:"".concat(Ue.a.grid," mt-6 ml-4 mr-4"),children:null===s||void 0===s?void 0:s.filter((function(e){return"main"===e.type})).map((function(e){return Object(se.jsx)(Je,{ingredient:e},e._id)}))})]})]})},Ye=n(205),Ke=n(109);var Ze=function(){return Object(se.jsx)("main",{className:"".concat(ge.a.main),children:Object(se.jsxs)(Ye.a,{backend:Ke.a,children:[Object(se.jsx)(Xe,{}),Object(se.jsx)(Ge,{})]})})},Qe=n(104),Ve=n.n(Qe),$e=n(26),et=n.n($e),tt=function(e){var t=e.ingredient,n=t.name,r=t.image,a=t.calories,c=t.proteins,s=t.fat,i=t.carbohydrates;return Object(se.jsxs)("div",{className:"".concat(et.a.container," pb-15"),children:[Object(se.jsx)("div",{className:et.a.img,children:Object(se.jsx)("img",{src:r,alt:"ingredient"})}),Object(se.jsx)("h3",{className:"text text_type_main-medium mt-4",children:n}),Object(se.jsxs)("div",{className:"".concat(et.a.structure," mt-8"),children:[Object(se.jsxs)("div",{className:"text_color_inactive",children:[Object(se.jsx)("span",{className:"".concat(et.a.title," text text_type_main-small"),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0439, \u043a\u043a\u0430\u043b"}),Object(se.jsx)("span",{className:"text text_type_digits-default",children:a})]}),Object(se.jsxs)("div",{className:"text_color_inactive ml-5",children:[Object(se.jsx)("span",{className:"".concat(et.a.title," text text_type_main-small"),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(se.jsx)("span",{className:"text text_type_digits-default",children:c})]}),Object(se.jsxs)("div",{className:"text_color_inactive ml-5",children:[Object(se.jsx)("span",{className:"".concat(et.a.title," text text_type_main-small"),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(se.jsx)("span",{className:"text text_type_digits-default",children:s})]}),Object(se.jsxs)("div",{className:"text_color_inactive ml-5",children:[Object(se.jsx)("span",{className:"".concat(et.a.title," text text_type_main-small"),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(se.jsx)("span",{className:"text text_type_digits-default",children:i})]})]})]})};var nt=function(){var e=ce((function(e){return e.ingredients})),t=e.ingredients,n=Object(o.i)().id,r=t.find((function(e){return e._id===n}));return r?Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:[Ve.a.ingredient,"main mt-30"].join(" "),children:Object(se.jsx)(tt,{ingredient:r})})}):Object(se.jsx)(o.a,{to:"/404"})};var rt=function(){var e=Object(o.g)(),t=Object(o.i)().id,n=ce((function(e){return e.ingredients})),r=n.ingredients.find((function(e){return e._id===t}));return r?Object(se.jsx)(Be,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){e.goBack()},children:Object(se.jsx)(tt,{ingredient:r})}):null},at=n(105),ct=n.n(at);var st=function(){return Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("main",{className:[ct.a.not_found,"main mt-30"].join(" "),children:Object(se.jsx)("h1",{className:"text text_type_main-large",children:"\u0423\u043f\u0441\u0441... \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0448\u043b\u0430\u0441\u044c"})})})},it=n(36),ot=n.n(it),lt=function(e){return e?"primary":"secondary"},ut=function(){var e=!!Object(o.j)({path:"/",exact:!0}),t=!!Object(o.j)("/feed"),n=!!Object(o.j)("/profile");return Object(se.jsxs)("header",{className:"p-4 ".concat(ot.a.header),children:[Object(se.jsxs)("div",{className:ot.a.link_container,children:[Object(se.jsxs)(l.c,{to:"/",className:"p-5 ".concat(ot.a.link," secondary"),activeClassName:"primary",exact:!0,children:[Object(se.jsx)(m.BurgerIcon,{type:lt(e)}),Object(se.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(se.jsxs)(l.c,{to:"/feed",className:"p-5 ml-2 ".concat(ot.a.link," secondary"),activeClassName:"primary",children:[Object(se.jsx)(m.ListIcon,{type:lt(t)}),Object(se.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(se.jsx)(m.Logo,{}),Object(se.jsxs)(l.c,{to:"/profile",className:"p-5 ".concat(ot.a.link," secondary"),activeClassName:"primary",children:[Object(se.jsx)(m.ProfileIcon,{type:lt(n)}),Object(se.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})},dt=n(27),jt=n.n(dt),mt={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u044c\u0441\u044f",created:"\u0421\u043e\u0437\u0434\u0430\u043d"},bt=function(e){var t=e.image;return Object(se.jsx)("div",{className:jt.a.preview,children:Object(se.jsx)("img",{src:t,alt:"ingredient"})})};function pt(e){var t=e.order,n=e.type,r=Object(o.h)(),c=ce((function(e){return e.ingredients})),s=c.ingredients,i=Object(a.useCallback)((function(e,t){var n;return e+((null===(n=s.find((function(e){return e._id===t})))||void 0===n?void 0:n.price)||0)}),[s]),u=Object(a.useMemo)((function(){return t.ingredients.reduce(i,0)}),[i,t.ingredients]),d=Object(a.useMemo)((function(){return t.ingredients.map((function(e){var t;return null===(t=s.find((function(t){return t._id===e})))||void 0===t?void 0:t.image_mobile}))}),[s,t.ingredients]);return Object(se.jsx)("div",{className:"".concat(jt.a.card," p-6 mb-4 ").concat("feed"===n?jt.a.feed:jt.a.history),children:Object(se.jsxs)(l.b,{to:{pathname:"/".concat("feed"===n?"feed":"profile/orders","/").concat(t.number),state:{order:r}},children:[Object(se.jsxs)("div",{className:"".concat(jt.a.header," mt-6 mb-6"),children:[Object(se.jsxs)("span",{className:"text text_type_digits-default",children:["#",t.number]}),Object(se.jsx)("span",{className:"text text_type_main-small secondary",children:new Date(t.createdAt).toLocaleDateString()})]}),Object(se.jsx)("div",{className:"mt-6",children:Object(se.jsx)("span",{className:"text text_type_main-medium",children:t.name})}),"history"===n&&Object(se.jsx)("div",{className:"mt-2",children:Object(se.jsx)("span",{className:"text text_type_main-small",children:mt[t.status]})}),Object(se.jsxs)("div",{className:"".concat(jt.a.footer," mt-6"),children:[Object(se.jsx)("div",{className:jt.a.previews,children:d.map((function(e,t){return Object(se.jsx)(bt,{image:e||""},t)}))}),Object(se.jsxs)("span",{className:"text text_type_digits-default",children:[u,Object(se.jsx)(m.CurrencyIcon,{type:"primary"})]})]})]})})}var xt=n(106),ft=n.n(xt);function Ot(e){var t=e.orders,n=e.type;return Object(se.jsx)("div",{className:"".concat(ft.a.orders," pr-2"),children:t.map((function(e){return Object(se.jsx)(pt,{order:e,type:n},e.number)}))})}var ht=n(54),_t=n.n(ht);function yt(e){var t=e.orders,n=e.total,r=e.totalToday,c=Object(a.useMemo)((function(){return t.filter((function(e){return"done"===e.status}))}),[t]),s=Object(a.useMemo)((function(){return t.filter((function(e){return"pending"===e.status}))}),[t]);return Object(se.jsxs)("div",{className:"ml-15",children:[Object(se.jsxs)("div",{className:_t.a.orders,children:[Object(se.jsxs)("div",{className:"mr-9",children:[Object(se.jsx)("h3",{className:"text text_type_main-medium mb-4",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(se.jsx)("div",{className:_t.a.grid,children:c.map((function(e){return Object(se.jsx)("span",{className:"text text_type_digits-default success",children:e.number},e.number)}))})]}),Object(se.jsxs)("div",{children:[Object(se.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(se.jsx)("div",{className:_t.a.grid,children:s.map((function(e){return Object(se.jsx)("span",{className:"text text_type_digits-default",children:e.number},e.number)}))})]})]}),Object(se.jsxs)("div",{children:[Object(se.jsx)("h3",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(se.jsx)("span",{className:"text text_type_digits-large",children:n})]}),Object(se.jsxs)("div",{children:[Object(se.jsx)("h3",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(se.jsx)("span",{className:"text text_type_digits-large",children:r})]})]})}var gt=n(76),vt=n.n(gt);function Nt(){var e=ae(),t=ce((function(e){return e.orders})),n=t.orders,r=t.total,c=t.totalToday;return Object(a.useEffect)((function(){return e(H("wss://norma.nomoreparties.space/orders/all")),function(){e(J())}}),[e]),Object(se.jsxs)("main",{className:vt.a.main,children:[Object(se.jsx)("h2",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(se.jsxs)("div",{className:vt.a.flex,children:[Object(se.jsx)(Ot,{orders:n,type:"feed"}),Object(se.jsx)(yt,{orders:n,total:r,totalToday:c})]})]})}var kt=n(107),wt=n.n(kt);function Ct(){var e=ae(),t=ce((function(e){return e.orders})),n=t.orders,r=ce((function(e){return e.auth})),c=r.accessToken;return Object(a.useEffect)((function(){return e(H("wss://norma.nomoreparties.space/orders?token=".concat(c))),function(){e(J())}}),[e,c]),Object(se.jsxs)("main",{className:[wt.a.history,"main mt-30"].join(" "),children:[Object(se.jsx)(me,{location:"order-history"}),Object(se.jsx)(Ot,{orders:n,type:"history"})]})}var St=n(108),Rt=n.n(St),Tt=n(28),It=n.n(Tt);function Et(e){var t=e.order,n=ce((function(e){return e.ingredients})),r=n.ingredients,c=Object(a.useCallback)((function(e,t){var n;return e+((null===(n=r.find((function(e){return e._id===t})))||void 0===n?void 0:n.price)||0)}),[r]),s=Object(a.useMemo)((function(){return t.ingredients.reduce(c,0)}),[c,t.ingredients]),i=Object(a.useMemo)((function(){var e={};return t.ingredients.forEach((function(t){var n=r.find((function(e){return e._id===t}));n&&(e[t]?e[t].count+=1:e[t]=Object(d.a)(Object(d.a)({},n),{},{count:1}))})),Object.values(e)}),[r,t]);return Object(se.jsxs)("div",{children:[Object(se.jsxs)("span",{className:"text text_type_digits-default",children:["#",t.number]}),Object(se.jsx)("h3",{className:"text text_type_main-medium mt-10",children:t.name}),Object(se.jsx)("span",{className:"text text_type_main-small mt-3",children:mt[t.status]}),Object(se.jsx)("h3",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(se.jsx)("div",{className:"".concat(It.a.ingredients," mt-6 pr-6"),children:i.map((function(e){return Object(se.jsxs)("div",{className:"".concat(It.a.row," mb-4"),children:[Object(se.jsxs)("div",{className:It.a.flex,children:[Object(se.jsx)(bt,{image:e.image_mobile||""}),Object(se.jsx)("span",{className:"text text_type_main-small ml-4",children:e.name})]}),Object(se.jsxs)("div",{className:"".concat(It.a.flex," ml-4"),children:[Object(se.jsx)("span",{className:"text text_type_digits-default mr-2",children:"".concat(e.count," x ").concat(e.price)}),Object(se.jsx)(m.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(se.jsxs)("div",{className:"".concat(It.a.footer," mt-10 ").concat(It.a.row),children:[Object(se.jsx)("span",{className:"text text_type_main-small secondary",children:new Date(t.createdAt).toLocaleDateString()}),Object(se.jsxs)("div",{className:"".concat(It.a.flex," ml-4"),children:[Object(se.jsx)("span",{className:"text text_type_digits-default mr-2",children:s}),Object(se.jsx)(m.CurrencyIcon,{type:"primary"})]})]})]})}function qt(e){var t=e.type,n=ae(),r=Object(o.i)().id,c=ce((function(e){return e.orders})),s=c.orders,i=ce((function(e){return e.auth})),l=i.accessToken;Object(a.useEffect)((function(){return n(H("wss://norma.nomoreparties.space/orders".concat("feed"===t?"/all":"?token=".concat(l)))),function(){n(J())}}),[n,l,t]);var u=s.find((function(e){return e.number===+r}));return u?Object(se.jsx)("main",{className:[Rt.a.order,"main mt-30"].join(" "),children:Object(se.jsx)(Et,{order:u})}):null}var Pt=function(){var e=Object(o.g)(),t=Object(o.i)().id,n=ce((function(e){return e.orders})),r=n.orders.find((function(e){return e.number===+t}));return r?Object(se.jsx)(Be,{onClose:function(){e.goBack()},children:Object(se.jsx)(Et,{order:r})}):null};function Ft(){var e=Object(o.h)(),t=Object(o.g)(),n="PUSH"===t.action&&e.state&&e.state.ingredient,r="PUSH"===t.action&&e.state&&e.state.order;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ut,{}),Object(se.jsxs)(o.d,{location:n||r||e,children:[Object(se.jsx)(o.b,{path:"",exact:!0,children:Object(se.jsx)(Ze,{})}),Object(se.jsx)(o.b,{path:"/login",exact:!0,children:Object(se.jsx)(ie,{})}),Object(se.jsx)(o.b,{path:"/register",exact:!0,children:Object(se.jsx)(_e,{})}),Object(se.jsx)(o.b,{path:"/forgot-password",exact:!0,children:Object(se.jsx)(Oe,{})}),Object(se.jsx)(o.b,{path:"/reset-password",exact:!0,children:Object(se.jsx)(he,{})}),Object(se.jsx)(o.b,{path:"/ingredients/:id",exact:!0,children:Object(se.jsx)(nt,{})}),Object(se.jsx)(fe,{path:"/profile",exact:!0,children:Object(se.jsx)(be,{})}),Object(se.jsx)(fe,{path:"/profile/orders",exact:!0,children:Object(se.jsx)(Ct,{})}),Object(se.jsx)(o.b,{path:"/feed",exact:!0,children:Object(se.jsx)(Nt,{})}),Object(se.jsx)(o.b,{path:"/feed/:id",exact:!0,children:Object(se.jsx)(qt,{type:"feed"})}),Object(se.jsx)(fe,{path:"/profile/orders",exact:!0,children:Object(se.jsx)(Ct,{})}),Object(se.jsx)(fe,{path:"/profile/orders/:id",exact:!0,children:Object(se.jsx)(qt,{type:"history"})}),Object(se.jsx)(o.b,{path:"/404",children:Object(se.jsx)(st,{})}),Object(se.jsx)(o.a,{to:"/404"})]}),n&&Object(se.jsx)(o.b,{path:"/ingredients/:id",children:Object(se.jsx)(rt,{})}),r&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(o.b,{path:"/feed/:id",children:Object(se.jsx)(Pt,{})}),Object(se.jsx)(o.b,{path:"/profile/orders/:id",children:Object(se.jsx)(Pt,{})})]})]})}var Bt=function(){var e=ae(),t=ce((function(e){return e.ingredients})),n=t.ingredients;return Object(a.useEffect)((function(){e(U())}),[e]),0===n.length?null:Object(se.jsx)("div",{className:"App",children:Object(se.jsx)(l.a,{children:Object(se.jsx)(Ft,{})})})},Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,209)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(se.jsx)(c.a.StrictMode,{children:Object(se.jsx)(q.a,{store:re,children:Object(se.jsx)(Bt,{})})}),document.getElementById("root")),Lt()},21:function(e,t,n){e.exports={auth:"styles_auth__3GlGh",form:"styles_form__3poBw"}},26:function(e,t,n){e.exports={container:"styles_container__2m1o5",structure:"styles_structure__2asiC",img:"styles_img__YgduC"}},27:function(e,t,n){e.exports={card:"styles_card__3YLma",header:"styles_header__12bmB",footer:"styles_footer__2Izu6",feed:"styles_feed__11a0t",history:"styles_history__3hXiX",preview:"styles_preview__3_lWM",previews:"styles_previews__3esPt"}},28:function(e,t,n){e.exports={footer:"styles_footer__1EapM",row:"styles_row__3FAQK",flex:"styles_flex__G-MFu",ingredients:"styles_ingredients__2X96n"}},31:function(e,t,n){e.exports={list:"styles_list__3SSX4",item:"styles_item__2Aa_R",sum:"styles_sum__32RHl"}},32:function(e,t,n){e.exports={nav:"styles_nav__3wYpH",item:"styles_item__3ZXRR",tip:"styles_tip__12xPP",button:"styles_button__3XYfh"}},33:function(e,t,n){e.exports={grid:"styles_grid__3vKFC",card:"styles_card__2HpA-",list:"styles_list__1eoza",info:"styles_info__10qrE",image:"styles_image__aPZO5",tabs:"styles_tabs__zzntG",ingredients_container:"styles_ingredients_container__3Ltj2"}},36:function(e,t,n){e.exports={link:"styles_link__3ThGf",link_container:"styles_link_container__1D3dL",header:"styles_header__3tmc7"}},43:function(e,t,n){e.exports={card:"styles_card__2bwln",info:"styles_info__2UorK",image:"styles_image__39oTO"}},52:function(e,t,n){e.exports={profile:"styles_profile__bjREu",wrapper:"styles_wrapper__PadoO",buttons:"styles_buttons__3NeGo",full:"styles_full__3Pvdi"}},53:function(e,t,n){e.exports={modal_wrapper:"styles_modal_wrapper__2pn2I",modal:"styles_modal__2Hc3f",close_icon:"styles_close_icon__23t1-"}},54:function(e,t,n){e.exports={orders:"styles_orders__KNU49",grid:"styles_grid__S3I8j"}},76:function(e,t,n){e.exports={main:"styles_main__3ok7b",flex:"styles_flex__2EgZ7"}}},[[199,1,2]]]);
//# sourceMappingURL=main.4f4c1160.chunk.js.map